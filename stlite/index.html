<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manual UI Curve Fit App (stlite)</title>
    <script src="https://cdn.jsdelivr.net/npm/@stlite/browser@0.76.0/build/stlite.js"></script>
    <style>
      html,
      body,
      #root {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      const loadRequirements = async () => {
        const response = await fetch("./requirements.txt");
        const content = await response.text();

        return content
          .split(/\r?\n/)
          .map((line) => line.trim())
          .filter((line) => line && !line.startsWith("#"));
      };

      const loadApp = async () => {
        const response = await fetch("./manual_fit_app.py");
        return response.text();
      };

      const [requirements, appSource] = await Promise.all([
        loadRequirements(),
        loadApp(),
      ]);

      stlite.mount(
        {
          requirements,
          entrypoint: "manual_fit_app.py",
          files: {
            "manual_fit_app.py": appSource,
          },
        },
        document.getElementById("root"),
      );
    </script>
  </body>
</html>
